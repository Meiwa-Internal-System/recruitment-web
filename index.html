<!DOCTYPE html>
<html lang="en">
  <head>
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-NBDBXXQS");
    </script>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meiwa Recruitment</title>

    <link rel="icon" href="/public/assets/meiwa.svg" type="image/svg+xml" />

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.css"
      rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/js/tom-select.complete.min.js"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            animation: {
              fadeInUp: "fadeInUp 1s ease-out forwards",
            },
            keyframes: {
              fadeInUp: {
                "20%": { opacity: "0", transform: "translateY(10px)" },
                "100%": { opacity: "1", transform: "translateY(0)" },
              },
            },
          },
        },
      };
    </script>

    <style>
      .scroll-fade-in {
        opacity: 0%;
        transform: translateY(20px);
      }

      .ts-control {
        padding: 1rem;
        background-color: rgb(249 250 251);
        border-width: 2px;
        border-color: rgb(209 213 219);
        border-radius: 0.75rem;
        font-weight: 600;
        font-size: medium;
      }

      .ts-control.focus {
        border-color: #3b82f6 !important;
        box-shadow: 0 0 0 1px #005794 !important;
      }

      .ts-control > input::placeholder {
        color: rgb(156 163 175);
        font-size: medium;
      }

      .ts-dropdown {
        border-radius: 0.75rem;
        border-width: 2px;
        border-color: rgb(209 213 219);
        overflow: hidden;
        font-size: medium;
      }

      .ts-dropdown .option {
        padding: 0.75rem;
        border-radius: 0.75rem;
        overflow: hidden;
        font-size: medium;
      }
    </style>
  </head>
  <body class="bg-[#005794]">
    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-NBDBXXQS"
        height="0"
        width="0"
        style="display: none; visibility: hidden"></iframe
    ></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div
      class="container w-full sm:max-w-[400px] flex flex-col gap-8 bg-white md:max-w-[500px] md:mx-auto lg:max-w-[550px] lg:mx-auto scroll-smooth">
      <!-- Header -->
      <div class="flex flex-col gap-8 lg:gap-12 md:gap- bg-[#005794]">
        <div class="hero-section flex flex-col gap-8 lg:gap-14 md:gap-12">
          <div
            class="stack min-h-[500px] md:min-h-[600px] lg:min-h-[650px] relative">
            <div
              class="flex justify-between p-6 bg-[#005794] w-full md:max-w-[500px] md:mx-auto lg:max-w-[550px] z-10 shadow-[0_25px_18px_-24px_rgba(0,0,0,0.1)]">
              <img
                loading="eager"
                class="w-full sm:max-w-[350px] max-w-[250px] md:w-[80%] lg:w-[90%]"
                src="./public/assets/header/navbar-1.svg"
                alt="navbar-image" />
            </div>

            <div
              class="flex flex-col gap-[-24px] scroll-fade-in transition-all duration-700 ease-out">
              <img
                loading="eager"
                src="./public/assets/header/hero.png"
                alt="header-image"
                class="w-full" />
              <img
                loading="eager"
                class="-mt-6 md:-mt-8 px-8"
                src="./public/assets/header/hero-text.svg"
                alt="header-image"
                class="w-full" />
            </div>
          </div>

          <a
            class="w-full transition-transform duration-300 hover:scale-105 flex justify-center"
            target="_blank"
            href="https://line.me/ti/p/%40974ssyie">
            <img
              loading="eager"
              src="./public/assets/line-image.svg"
              alt="line-image"
              class="w-full max-w-[80%]" />
          </a>
        </div>

        <div class="stability-cta flex flex-col gap-8 lg:gap-14 md:gap-12">
          <img
            loading="eager"
            class="stack min-h-[400px] md:min-h-[500px] lg:min-h-[550px] relative px-8 py-4 scroll-fade-in transition-all duration-700 ease-out"
            src="./public/assets/header/body.svg"
            alt="header-image"
            class="w-full" />

          <a
            class="w-full transition-transform duration-300 hover:scale-105 flex justify-center sm:mb-12 mb-8"
            target="_blank"
            href="https://line.me/ti/p/%40974ssyie">
            <img
              loading="eager"
              src="./public/assets/line-image.svg"
              alt="line-image"
              class="w-full max-w-[80%]" />
          </a>
        </div>
      </div>

      <!-- Company Values -->
      <div class="company-values flex flex-col gap-6 lg:gap-10 md:gap-8">
        <img
          loading="eager"
          class="scroll-fade-in transition-all duration-700 ease-out px-8"
          src="./public/assets/company-values/stability-cta.svg"
          alt="stability-cta-image" />

        <div class="bg-[#005794] flex flex-col gap-6 lg:gap-14 md:gap-12 py-8">
          <div class="card-groups flex flex-col gap-6 lg:gap-10 md:gap-12 px-8">
            <img
              loading="eager"
              class="scroll-fade-in transition-all duration-700 ease-out"
              src="./public/assets/company-values/about-title.svg"
              alt="about-title-image" />
            <img
              loading="eager"
              class="scroll-fade-in transition-all duration-700 ease-out"
              src="./public/assets/company-values/about-1.svg"
              alt="about-1-image" />
            <img
              loading="eager"
              class="scroll-fade-in transition-all duration-700 ease-out"
              src="./public/assets/company-values/about-2.svg"
              alt="about-2-image" />
            <div
              class="card-3 flex flex-col gap-4 p-8 bg-white scroll-fade-in transition-all duration-700 ease-out">
              <img
                loading="eager"
                src="./public/assets/company-values/about-3.svg"
                alt="about-3-image" />
              <img
                loading="eager"
                src="./public/assets/company-values/about-3-image.png"
                alt="about-3-image" />
            </div>
            <img
              loading="eager"
              class="scroll-fade-in transition-all duration-700 ease-out"
              src="./public/assets/company-values/about-4.svg"
              alt="about-4-image" />
            <img
              loading="eager"
              class="scroll-fade-in transition-all duration-700 ease-out"
              src="./public/assets/company-values/about-footer.svg"
              alt="about-footer-image" />
          </div>

          <a
            class="w-full transition-transform duration-300 hover:scale-105 flex justify-center sm:mt-2 mt-8"
            target="_blank"
            href="https://line.me/ti/p/%40974ssyie">
            <img
              loading="eager"
              src="./public/assets/line-image.svg"
              alt="line-image"
              class="w-full max-w-[80%]" />
          </a>
        </div>
      </div>

      <!-- Schedule -->
      <div
        class="company-values flex flex-col"
        style="background-image: url('public/assets/schedule/bg.svg')">
        <div class="flex flex-col gap-6 lg:gap-10 md:gap-8 p-4">
          <img
            loading="eager"
            class="scroll-fade-in transition-all duration-700 ease-out px-14"
            src="./public/assets/schedule/schedule-title.svg"
            alt="schedule-title-image" />
          <img
            loading="eager"
            class="scroll-fade-in transition-all duration-700 ease-out"
            src="./public/assets/schedule/schedule-image.png"
            alt="schedule-image" />
          <img
            loading="eager"
            class="scroll-fade-in transition-all duration-700 ease-out px-10"
            src="./public/assets/schedule/schedule-footer.svg"
            alt="schedule-footer-image" />
        </div>
      </div>

      <!-- Form -->
      <div class="w-full bg-sky-50 p-6 sm:p-8 rounded-2xl max-w-md mx-auto">
        <h2 class="font-semibold text-3xl text-center text-[#005794]">
          応募フォーム
        </h2>
        <form
          id="contact-form"
          class="w-full space-y-5"
          method="POST"
          action="send-email.php">
          <div>
            <label
              for="name"
              class="text-gray-700 font-bold block mb-2 text-sm uppercase tracking-wide">
              お名前
            </label>
            <input
              type="text"
              id="name"
              name="name"
              class="w-full p-3 bg-gray-50 border-2 border-gray-300 rounded-xl text-gray-800 font-semibold focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-[#005794] transition-all duration-200 placeholder-gray-400"
              placeholder="氏名を入力"
              required />
          </div>
          <div>
            <label
              for="email"
              class="text-gray-700 font-bold block mb-2 text-sm uppercase tracking-wide">
              メールアドレス
            </label>
            <input
              type="email"
              id="email"
              name="email"
              class="w-full p-3 bg-gray-50 border-2 border-gray-300 rounded-xl text-gray-800 font-semibold focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-[#005794] transition-all duration-200 placeholder-gray-400"
              placeholder="メールアドレスを入力"
              required />
          </div>
          <div>
            <label
              for="phone"
              class="text-gray-700 font-bold block mb-2 text-sm uppercase tracking-wide">
              電話番号
            </label>
            <input
              type="tel"
              id="phone"
              name="phone"
              class="w-full p-3 bg-gray-50 border-2 border-gray-300 rounded-xl text-gray-800 font-semibold focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-[#005794] transition-all duration-200 placeholder-gray-400"
              placeholder="例：080-1234-5678"
              required
              pattern="[0-9]{10,15}"
              minlength="10"
              maxlength="15"
              title="電話番号は10桁から15桁の半角数字で入力してください。" />
          </div>
          <div>
            <label
              for="age"
              class="text-gray-700 font-bold block mb-2 text-sm uppercase tracking-wide">
              年齢
            </label>
            <input
              type="number"
              id="age"
              name="age"
              class="w-full p-3 bg-gray-50 border-2 border-gray-300 rounded-xl text-gray-800 font-semibold focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-[#005794] transition-all duration-200 placeholder-gray-400"
              placeholder="例：25"
              min="18"
              max="100"
              title="年齢は18歳から100歳の間で入力してください。"
              required />
          </div>
          <div>
            <label
              for="prefecture"
              class="text-gray-700 font-bold block mb-2 text-sm uppercase tracking-wide">
              都道府県
            </label>

            <select
              id="prefecture"
              name="prefecture"
              placeholder="都道府県を選択してください"
              required></select>
          </div>

          <button
            type="submit"
            id="submit-button"
            class="w-full transition-transform duration-300 hover:scale-105 flex justify-center sm:pt-8 pt-4">
            <img
              loading="eager"
              src="./public/assets/button-form.svg"
              alt="送信する"
              class="w-full" />
          </button>
        </form>
      </div>

      <!-- Modal -->
      <div
        id="success-modal"
        class="fixed inset-0 flex items-center justify-center p-4 transition-opacity duration-300 ease-out opacity-0 pointer-events-none z-[9999]">
        <div
          id="modal-overlay"
          class="absolute inset-0 bg-black bg-opacity-50"></div>

        <div
          id="modal-content"
          class="w-full max-w-md flex flex-col p-6 relative items-center justify-center bg-[#005794] shadow-lg rounded-2xl transform transition-transform duration-300 ease-out scale-95">
          <div class="">
            <div class="text-center p-3 flex-auto justify-center">
              <h2 class="text-3xl font-bold py-4 text-gray-200">
                ありがとうございます！
              </h2>
            </div>
            <div class="flex flex-col gap-4">
              <a
                class="w-full transition-transform duration-300 hover:scale-105 flex justify-center"
                target="_blank"
                href="https://line.me/ti/p/%40974ssyie">
                <img
                  loading="eager"
                  src="./public/assets/line-image.svg"
                  alt="line-image"
                  class="w-full" />
              </a>
              <button
                id="close-modal-button"
                class="mb-2 md:mb-0 px-5 py-2 text-2xl text-white shadow-sm font-medium tracking-wider border-2 border-slate-400 hover:border-gray-700 rounded-full hover:shadow-lg hover:bg-gray-800 transition ease-in duration-300">
                閉じる
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Blog -->
      <div class="flex flex-col sm:my-12 mt-4 gap-6 lg:gap-10 md:gap-8 px-6">
        <img
          loading="eager"
          class="scroll-fade-in transition-all duration-700 ease-out"
          src="./public/assets/blog/title.svg"
          alt="blog-title-image" />

        <img
          loading="eager"
          class="scroll-fade-in transition-all duration-700 ease-out"
          src="./public/assets/blog/blog-image.png"
          alt="blog-image" />

        <img
          loading="eager"
          class="scroll-fade-in transition-all duration-700 ease-out"
          src="./public/assets/blog/text.svg"
          alt="blog-footer-image" />
      </div>

      <!-- Review -->
      <div class="flex flex-col gap-8 lg:gap-14 md:gap-12 bg-[#005794] py-6">
        <div class="flex flex-col gap-4 lg:gap-8 md:gap-6">
          <img
            loading="eager"
            class="w-[180px] md:w-[40%] lg:w-[50%] scroll-fade-in transition-all duration-700 ease-out pl-4 md:pl-6 lg:pl-8"
            src="./public/assets/review/title-review.svg"
            alt="title-review-image" />
          <img
            loading="eager"
            class="mr-8 md:mr-12 lg:mr-16 sm:w-64 md:w-[80%] lg:w-[90%] scroll-fade-in transition-all duration-700 ease-out"
            src="./public/assets/review/title-review-image.png"
            alt="title-review-image" />
        </div>

        <img
          loading="eager"
          class="px-4 scroll-fade-in transition-all duration-700 ease-out"
          src="./public/assets/review/review-dialog.svg"
          alt="review-dialog-image" />
      </div>

      <!-- Sacyou Message -->
      <div class="flex flex-col gap-8 lg:gap-14 md:gap-12">
        <div
          class="flex flex-col items-start gap-4 scroll-fade-in transition-all duration-700 ease-out px-6">
          <img
            loading="eager"
            class="w-11/12 sm:w-11/12 md:w-[80%] lg:w-[90%] mr-auto"
            src="./public/assets/message/sacyou-message-title.svg"
            alt="title-message" />
          <img
            loading="eager"
            class="w-11/12 sm:w-11/12 mr-auto pl-3"
            src="./public/assets/message/sacho-image.png"
            alt="sacho-image" />
          <img
            loading="eager"
            class="w-full sm:w-11/12 md:w-[80%] lg:w-[90%]"
            src="./public/assets/message/sacyou-message-1.svg"
            alt="sachou-message" />
        </div>

        <div class="flex flex-col gap-10">
          <div
            class="flex flex-col items-start gap-4 scroll-fade-in transition-all duration-700 ease-out mr-auto">
            <img
              loading="eager"
              class="w-[95%] sm:w-[90%]"
              src="./public/assets/message/card-message-image-1.png"
              alt="card-message-image-1" />
            <img
              loading="eager"
              class="w-[92%] sm:w-[90%] sm:mx-auto mx-6"
              src="./public/assets/message/card-message-1.svg"
              alt="card-message-1" />
          </div>

          <div
            class="flex flex-col items-end gap-4 scroll-fade-in transition-all duration-700 ease-out">
            <img
              loading="eager"
              class="w-[96%] sm:w-[95%] sm:ml-auto"
              src="./public/assets/message/card-message-image-2.png"
              alt="card-message-image-2" />
            <img
              loading="eager"
              class="sm:w-[90%] w-[92%] mx-auto"
              src="./public/assets/message/card-message-2.svg"
              alt="card-message-2" />
          </div>

          <div
            class="flex flex-col items-start gap-4 scroll-fade-in transition-all duration-700 ease-out mr-auto">
            <img
              loading="eager"
              class="w-[95%] sm:w-[90%]"
              src="./public/assets/message/card-message-image-3.png"
              alt="card-message-image-3" />
            <img
              loading="eager"
              class="w-[90%] sm:w-[90%] sm:mx-auto mx-6"
              src="./public/assets/message/card-message-3.svg"
              alt="card-message-3" />
          </div>
        </div>
      </div>

      <!-- Form -->
      <div class="w-full bg-sky-50 p-6 sm:p-8 rounded-2xl max-w-md mx-auto">
        <h2 class="font-semibold text-3xl text-center text-[#005794]">
          応募フォーム
        </h2>
        <form
          id="contact-form-2"
          class="w-full space-y-5"
          method="POST"
          action="send-email.php">
          <div>
            <label
              for="name-2"
              class="text-gray-700 font-bold block mb-2 text-sm uppercase tracking-wide">
              お名前
            </label>
            <input
              type="text"
              id="name-2"
              name="name"
              class="w-full p-3 bg-gray-50 border-2 border-gray-300 rounded-xl text-gray-800 font-semibold focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-[#005794] transition-all duration-200 placeholder-gray-400"
              placeholder="氏名を入力"
              required />
          </div>
          <div>
            <label
              for="email-2"
              class="text-gray-700 font-bold block mb-2 text-sm uppercase tracking-wide">
              メールアドレス
            </label>
            <input
              type="email"
              id="email-2"
              name="email"
              class="w-full p-3 bg-gray-50 border-2 border-gray-300 rounded-xl text-gray-800 font-semibold focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-[#005794] transition-all duration-200 placeholder-gray-400"
              placeholder="メールアドレスを入力"
              required />
          </div>
          <div>
            <label
              for="phone-2"
              class="text-gray-700 font-bold block mb-2 text-sm uppercase tracking-wide">
              電話番号
            </label>
            <input
              type="tel"
              id="phone-2"
              name="phone"
              class="w-full p-3 bg-gray-50 border-2 border-gray-300 rounded-xl text-gray-800 font-semibold focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-[#005794] transition-all duration-200 placeholder-gray-400"
              placeholder="例：080-1234-5678"
              required
              pattern="[0-9]{10,15}"
              minlength="10"
              maxlength="15"
              title="電話番号は10桁から15桁の半角数字で入力してください。" />
          </div>
          <div>
            <label
              for="age-2"
              class="text-gray-700 font-bold block mb-2 text-sm uppercase tracking-wide">
              年齢
            </label>
            <input
              type="number"
              id="age-2"
              name="age"
              class="w-full p-3 bg-gray-50 border-2 border-gray-300 rounded-xl text-gray-800 font-semibold focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-[#005794] transition-all duration-200 placeholder-gray-400"
              placeholder="例：25"
              min="18"
              max="100"
              title="年齢は18歳から100歳の間で入力してください。"
              required />
          </div>
          <div>
            <label
              for="prefecture-2"
              class="text-gray-700 font-bold block mb-2 text-sm uppercase tracking-wide">
              都道府県
            </label>
            <select
              id="prefecture-2"
              name="prefecture"
              placeholder="都道府県を選択してください"
              required></select>
          </div>

          <button
            type="submit"
            id="submit-button-2"
            class="w-full transition-transform duration-300 hover:scale-105 flex justify-center sm:pt-8 pt-4">
            <img
              loading="eager"
              src="./public/assets/button-form.svg"
              alt="送信する"
              class="w-full" />
          </button>
        </form>
      </div>

      <!-- Footer -->
      <div class="flex flex-col bg-[#005794]">
        <a
          class="w-full transition-transform duration-300 hover:scale-105 flex justify-center sm:mt-8 mt-4"
          target="_blank"
          href="https://line.me/ti/p/%40974ssyie">
          <img
            loading="eager"
            src="./public/assets/line-image.svg"
            alt="line-image"
            class="w-full max-w-[80%]" />
        </a>

        <img
          loading="eager"
          src="./public/assets/footer/footer.svg"
          alt="footer-image" />
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // Modal and prefecture select
        const successModal = document.getElementById("success-modal");
        const modalContent = document.getElementById("modal-content");
        const closeModalButton = document.getElementById("close-modal-button");
        const modalOverlay = document.getElementById("modal-overlay");

        const prefectureSelects = document.querySelectorAll(
          "select[name='prefecture']"
        );
        const tomSelectInstances = [];

        prefectureSelects.forEach((selectElement) => {
          const tomSelect = new TomSelect(selectElement, {
            create: false,
            maxOptions: 200,
            render: {
              option: function (data, escape) {
                return "<div>" + escape(data.text) + "</div>";
              },
              item: function (data, escape) {
                this.control.classList.remove("text-gray-400");
                return "<div>" + escape(data.text) + "</div>";
              },
            },
            onClear: function () {
              this.control.classList.add("text-gray-400");
            },
          });
          tomSelectInstances.push(tomSelect);
        });

        function showModal() {
          tomSelectInstances.forEach((instance) => instance.close());
          successModal.classList.remove("opacity-0", "pointer-events-none");
          modalContent.classList.remove("scale-95");
          modalContent.classList.add("scale-100");
        }

        function hideModal() {
          successModal.classList.add("opacity-0", "pointer-events-none");
          modalContent.classList.remove("scale-100");
          modalContent.classList.add("scale-95");
        }

        closeModalButton.addEventListener("click", hideModal);
        modalOverlay.addEventListener("click", hideModal);

        // Form logic
        const contactForms = document.querySelectorAll(
          "form[id^='contact-form']"
        );
        contactForms.forEach((form) => {
          form.addEventListener("submit", function (event) {
            event.preventDefault();
            if (!this.checkValidity()) {
              this.reportValidity();
              return;
            }

            const submitButton = form.querySelector("button[type='submit']");
            const originalButtonContent = submitButton.innerHTML;
            submitButton.disabled = true;
            submitButton.innerHTML = `<span class="text-black font-bold">送信中...</span>`;

            const formData = new FormData(this);
            fetch("send-email.php", { method: "POST", body: formData })
              .then((response) => response.json())
              .then((data) => {
                if (data.status === "success") {
                  showModal();
                  this.reset();
                  const tomSelectInstance = this.querySelector(
                    "select[name='prefecture']"
                  ).tomselect;
                  if (tomSelectInstance) {
                    tomSelectInstance.clear();
                    tomSelectInstance.control.classList.add("text-gray-400");
                  }
                } else {
                  alert("送信に失敗しました。\n" + data.message);
                }
              })
              .catch((error) => {
                console.error("Error:", error);
                alert("技術的なエラーが発生しました。もう一度お試しください。");
              })
              .finally(() => {
                submitButton.disabled = false;
                submitButton.innerHTML = originalButtonContent;
              });
          });
        });

        // Prefectures logic
        function populateTomSelect(tomSelect, items) {
          tomSelect.clear();
          tomSelect.clearOptions();
          const options = items.data.map((item) => ({
            value: item.pref,
            text: item.pref,
          }));
          tomSelect.addOptions(options);
        }

        async function loadPrefectures() {
          const cacheKey = "prefecturesCache";
          const defaultOptionText = "都道府県を選択してください";
          let prefecturesData = null;

          const cachedData = localStorage.getItem(cacheKey);
          if (cachedData) {
            const parsedCache = JSON.parse(cachedData);
            if (new Date().getTime() < parsedCache.expiry) {
              prefecturesData = parsedCache.data;
            }
          }
          if (!prefecturesData) {
            try {
              const proxyUrl = "https://corsproxy.io/?";
              const apiUrl = "https://apis.postcode-jp.com/api/v6/prefectures/";
              const response = await fetch(
                proxyUrl + encodeURIComponent(apiUrl)
              );
              if (!response.ok)
                throw new Error(`HTTP error! status: ${response.status}`);
              prefecturesData = await response.json();
              const cachePayload = {
                expiry: new Date().getTime() + 24 * 60 * 60 * 1000,
                data: prefecturesData,
              };
              localStorage.setItem(cacheKey, JSON.stringify(cachePayload));
            } catch (error) {
              console.error("Failed to load prefectures:", error);
            }
          }
          if (prefecturesData) {
            tomSelectInstances.forEach((instance) => {
              populateTomSelect(instance, prefecturesData, defaultOptionText);
            });
          } else {
            tomSelectInstances.forEach((instance) => {
              instance.clear();
              instance.addOption({
                value: "",
                text: "データの読み込みに失敗しました",
              });
              instance.disable();
            });
          }
        }
        loadPrefectures();

        // Animation logic
        const targets = document.querySelectorAll(".scroll-fade-in");
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.classList.remove("opacity-0", "translate-y-4");
                entry.target.classList.add("opacity-100", "translate-y-0");
              }
            });
          },
          { threshold: 0.1 }
        );
        targets.forEach((target) => observer.observe(target));
      });
    </script>
  </body>
</html>
